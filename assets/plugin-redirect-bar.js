(()=>{"use strict";const e=lit,t=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}};function i(e){return(i,r)=>void 0!==r?((e,t,i)=>{t.constructor.createProperty(i,e)})(e,i,r):t(e,i)}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var r;null===(r=window.HTMLSlotElement)||void 0===r||r.prototype.assignedElements;const n=e.css`.plugin-redirect-bar{position:fixed;top:0;left:0;z-index:999;background-color:#424245;padding:10px 30px 10px 20px;width:100%;color:rgba(255,255,255,.92);box-sizing:border-box}.plugin-redirect-bar__first-step{min-height:36px}.plugin-redirect-bar__first-step .plugin-redirect-bar__country-name{min-width:200px}.plugin-redirect-bar__second-step{min-height:36px;animation:slip_in .3s}.plugin-redirect-bar__second-step .plugin-redirect-bar__country-name{padding-left:12px;padding-right:12px;cursor:pointer}.plugin-redirect-bar__text{display:inline-block;margin-right:10px}.plugin-redirect-bar__country-name{height:36px;line-height:36px;border-radius:8px;border:1px solid rgba(255,255,255,.56);display:inline-block;text-align:center;margin-right:10px}.plugin-redirect-bar__jump-btn{height:36px;min-width:66px;padding-left:24px;padding-right:24px;border-radius:8px;background-color:#0071e3;color:#fff;display:inline-block;cursor:pointer;line-height:36px;font-size:17px;text-align:center;margin-top:4px}.plugin-redirect-bar__close-wrapper{display:inline-block;position:relative;height:16px;width:16px;cursor:pointer;margin-left:10px}.plugin-redirect-bar__close-icon::after,.plugin-redirect-bar__close-icon::before{position:absolute;content:" ";background-color:rgba(255,255,255,.56);top:1px;left:7px;width:1px;height:16px;pointer-events:auto;cursor:pointer}.plugin-redirect-bar__close-icon::before{transform:rotate(45deg)}.plugin-redirect-bar__close-icon::after{transform:rotate(-45deg)}.plugin-redirect-bar__btn-wrapper-icon{display:inline-block}.plugin-redirect-bar__second-step_text{display:inline-block;margin-right:10px}@keyframes slip_in{from{transform:translateX(100%)}to{transform:translateX(0)}}@media screen and (max-width:1380px){.plugin-redirect-bar__btn-wrapper-icon{display:block}.plugin-redirect-bar__close-wrapper{display:block;position:absolute;top:8px;right:8px}}`;var o=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const c={SITE_CODE:{US:"us",UK:"uk",EU:"eu"},SITE_URL:{US:"https://xtool.com",UK:"https://uk.xtool.com/",EU:"https://www.xtool.eu/"},JUMP_TEXT:{EN:"Click here to be redirected to the more applicable version of our website for your region/country.",DE:"W盲hlen Sie ein anderes Land oder eine andere Region aus, um f眉r Ihren Standort spezifische Inhalte anzuzeigen und online einzukaufen.",ES:"Por favor haga clic en el bot贸n para ser redirigido al sitio web correcto de su ubicaci贸n con m谩s contenido aplicable y m谩s opciones de compra.",FR:"Cliquez ici pour 锚tre redirig茅 vers la version la plus applicable de notre site Web pour votre r茅gion/pays."},JUMP_BUTTON:{EN:"Go",DE:"Go",ES:"Go",FR:"Go"},SECOND_CONFIRM_TEXT:{EN:"Are you sure? You won't be able to place an order on this website.",DE:"Sind Sie sicher? Auf dieser Website k枚nnen Sie keine Bestellung abschlie脽en.",ES:"驴Est谩 seguro? No podr谩 hacer un pedido en este sitio web.",FR:"脢tes-vous s没r? Vous ne pourrez pas passer de commande sur ce site."},SECOND_CONFIRM_JUMP_BUTTON_TEXT:{EN:"No, go to the right website",DE:"Nein, zur richtigen Website.",ES:"No, quiero ir al sitio web correcto.",FR:"Non, allez sur le bon site"},SECOND_CONFIRM_STAY_BUTTON_TEXT:{EN:"Yes, I'm just taking a look",DE:"Ja, ich m枚chte die Website nur st枚bern.",ES:"S铆, solo estoy echando un vistazo.",FR:"Oui, je regarde juste"},COUNTRY:{ES:"Espa帽a",DE:"Deutschland",FR:"France"}};let a=class extends e.LitElement{constructor(){super(),this.countryInfo={jumpText:"",countryName:"",jumpBtnText:"",secondConfirmJumpText:"",secondConfirmStayBtnText:"",secondConfirmJumpBtnText:""},this.siteUrl="",this.currentStep=0,this.isSessionIgnore=()=>"yes"===sessionStorage.getItem("ip-ignore"),this.sessionIgnore=()=>{sessionStorage.setItem("ip-ignore","yes")},this.getIp=()=>{const e={ip:"",countryName:"",countryISO:"",continentCode:""};fetch("https://dtc.mblock.cc/shopify/ip",{method:"GET"}).then((e=>e.json())).then((t=>{if(0!==t.code)return;const{data:i}=t;e.countryName=i.country_name,e.countryISO=i.country_iso_code,e.continentCode=i.continent_code;const r=this.getCurrentSite(),n=this.countryToSite(e);r!==n.code&&(this.siteUrl=n.url,this.updateCountryInfo(e))})).catch((e=>{console.error("err",e)}))},this.updateCountryInfo=e=>{const t=e.countryISO;t&&(this.countryInfo={countryName:e.countryName,jumpText:c.JUMP_TEXT[t]||c.JUMP_TEXT.EN,jumpBtnText:c.JUMP_BUTTON[t]||c.JUMP_BUTTON.EN,secondConfirmJumpText:c.SECOND_CONFIRM_TEXT[t]||c.SECOND_CONFIRM_TEXT.EN,secondConfirmStayBtnText:c.SECOND_CONFIRM_STAY_BUTTON_TEXT[t]||c.SECOND_CONFIRM_STAY_BUTTON_TEXT.EN,secondConfirmJumpBtnText:c.SECOND_CONFIRM_JUMP_BUTTON_TEXT[t]||c.SECOND_CONFIRM_JUMP_BUTTON_TEXT.EN},this.currentStep=1)},this.handleJumpBtnClick=()=>{window.location.href=this.siteUrl},this.handleCloseIconClick=()=>{this.currentStep=2},this.handleSecondConfirmSubmitClick=()=>{window.location.href=this.siteUrl},this.handleSecondConfirmCloseClick=()=>{this.currentStep=0,this.sessionIgnore()},this.isSessionIgnore()||this.getIp()}getCurrentSite(){const e=window.location.hostname;return e.includes("uk")?c.SITE_CODE.UK:e.includes("eu")?c.SITE_CODE.EU:c.SITE_CODE.US}countryToSite(e){const{SITE_CODE:t,SITE_URL:i}=c,r={};return r[t.US]={code:t.US,url:i.US,name:"us绔�"},r[t.UK]={code:t.UK,url:i.UK,name:"uk绔�"},r[t.EU]={code:t.EU,url:i.EU,name:"eu绔�"},e?"GB"===e.countryISO?r[t.UK]:"EU"===e.continentCode?r[t.EU]:r[t.US]:r[t.US]}renderModal(){if(1===this.currentStep)return e.html`<div class="plugin-redirect-bar__first-step">
        <div class="plugin-redirect-bar__text">${this.countryInfo.jumpText||""}</div>
        <div class="plugin-redirect-bar__btn-wrapper-icon">
            <div class="plugin-redirect-bar__country-name">${this.countryInfo.countryName||""}</div>
            <div class="plugin-redirect-bar__jump-btn" @click=${this.handleJumpBtnClick}>${this.countryInfo.jumpBtnText||""}</div>
        </div>
        <div class="plugin-redirect-bar__close-wrapper" @click=${this.handleCloseIconClick}>
            <div class="plugin-redirect-bar__close-icon"></div>
        </div>
    </div>`}renderSecondModal(){if(2===this.currentStep)return e.html`<div class="plugin-redirect-bar__second-step">
        <div class="plugin-redirect-bar__second-step_text">${this.countryInfo.secondConfirmJumpText||""}</div>
        <div class="plugin-redirect-bar__btn-wrapper-icon">
            <div class="plugin-redirect-bar__country-name" @click=${this.handleSecondConfirmCloseClick}>${this.countryInfo.secondConfirmStayBtnText||""}</div>
            <div class="plugin-redirect-bar__jump-btn" @click=${this.handleSecondConfirmSubmitClick}>${this.countryInfo.secondConfirmJumpBtnText||""}</div>
        </div>
    </div>`}render(){if(this.currentStep)return e.html`<div class="plugin-redirect-bar">
      ${this.renderModal()}  
      ${this.renderSecondModal()}
    </div>`}};a.styles=n,o([i({type:Object}),s("design:type",Object)],a.prototype,"countryInfo",void 0),o([i({type:String}),s("design:type",Object)],a.prototype,"siteUrl",void 0),o([i({type:Number}),s("design:type",Object)],a.prototype,"currentStep",void 0),a=o([(e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:r}=t;return{kind:i,elements:r,finisher(t){customElements.define(e,t)}}})(e,t))("plugin-redirect-bar"),s("design:paramtypes",[])],a)})();