{%- comment -%}
------------------------------------------------------------------------------------------------------------------------
NOTE TO DEVELOPERS: welcome to Impact theme! We hope that you will enjoy editing this theme as much as we did for
  developing it. We have put a lot of work to make this theme as developer friendly as possible by offering you
  hooks to integrate into critical parts of the theme. You will find the complete technical documentation (including
  all events, dependencies...) in the "documentation.txt" file, located in the Assets folder.
------------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

<!doctype html>

<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{% render 'direction' %}">
  <head>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="theme-color" content="{{ settings.header_background }}">
   <meta name="google-site-verification" content="AXLnYasdNOTTgZza5J4JyXbzZKTd3fahFAq6rmN6BMA" />
    <title>{% if page_title == blank %}{{ shop.name }}{% else %}{{ page_title }}{% if current_page != 1 %} &ndash; {{ 'general.page' | t: page: current_page }}{% endif %}{% endif %}</title>

    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}

    <link rel="canonical" href="{{ canonical_url }}">

    {%- if settings.favicon -%}
      <link rel="shortcut icon" href="{{ settings.favicon | image_url: width: 96 }}">
      <link rel="apple-touch-icon" href="{{ settings.favicon | image_url: width: 180 }}">
    {%- endif -%}

    {%- comment -%}Few prefetch to increase performance on commonly used third-parties{%- endcomment -%}
    <link rel="preconnect" href="https://cdn.shopify.com">
    <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    <link rel="dns-prefetch" href="https://productreviews.shopifycdn.com">

    {%- comment -%}Some preload{%- endcomment -%}
    <link rel="modulepreload" href="{{ 'vendor.min.js' | asset_url }}" as="script">
    <link rel="modulepreload" href="{{ 'theme.js' | asset_url }}" as="script">
    <link rel="modulepreload" href="{{ 'sections.js' | asset_url }}" as="script">

    {%- unless settings.heading_font.system? -%}
      <link rel="preload" href="{{ settings.heading_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- unless settings.text_font.system? -%}
      <link rel="preload" href="{{ settings.text_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- render 'social-meta-tags' -%}
    {%- render 'microdata-schema' -%}
    {%- render 'css-variables' -%}
    {%- render 'js-variables' -%}
<!-- place in Online store -> [...] -> Edit code -> theme.liquid  -->




<script>
    (function () {
        const HTML = {
            _txt: document.createElement('textarea'),
            decode: function (text) {
                this._txt.innerHTML = text;
                return this._txt.innerText.trim();
            }
        };

        const setup_init_code = function (ev) {
            window.removeEventListener('load', setup_init_code);

            // defer gtag, avoid some Shopify plugin to destory existing dataLayer during load
            setTimeout(() => {

                // GA4 Ecommerce [ view_item, add_to_cart, begin_checkout ]
                const CURRENCY = '{{shop.currency}}';
                const GA4_Ids = dataLayer.filter(function (x) { return x.length < 2 ? false : x[0] === 'config' && x[1].startsWith('G-'); }).map(function (x) { return x[1]; });

                // view product
                if (location.pathname.includes('/products/') === true
                    || location.pathname.includes('/collections/') === true) {
                    if ('{{product.id}}'.trim() !== '') {
                        gtag2('event', 'view_item', {
                            send_to: GA4_Ids,
                            currency: CURRENCY,
                            items: [
                                {
                                    item_id: '{{product.id}}',
                                    item_name: HTML.decode('{{product.title | escape}}'),
                                    price: parseInt('{{product.price}}') / 100,
                                    item_category: HTML.decode('{{product.selected_or_first_available_variant.sku | escape}}'),
                                }
                            ]
                        });

                        gtag2('event', 'conversion', { 'send_to': 'AW-340863504/YzypCIyMg90DEJDUxKIB' });

                    }
                }

                const cartItems_additional = [];
                // add to cart (product view)
                document.querySelectorAll('[name=add], #AddToCart-product-template-pop2, .ProductForm__AddToCart').forEach(function (x) {
                    x.addEventListener('mouseup', function (e) {
                        let item = {
                            item_id: '{{product.id}}',
                            item_name: HTML.decode('{{product.title | escape}}'),
                            price: parseInt('{{product.price}}') / 100,
                            quantity: document.querySelector('input[name=quantity]')?.value ?? 1,
                            item_category: HTML.decode('{{product.selected_or_first_available_variant.sku | escape}}'),
                        };
                        console.warn(item);

                        gtag2('event', 'add_to_cart', {
                            send_to: GA4_Ids,
                            currency: CURRENCY,
                            items: [item]
                        });
                        cartItems_additional.push(item);

                        gtag2('event', 'conversion', { 'send_to': 'AW-340863504/4rXhCImMg90DEJDUxKIB' });

                    });
                });

                // begin checkout
                function handle_begin_checkout(cartItems_additional = []) {
                    const items = [
                        // {%- for line_item in cart.items %}
                        {
                            item_id: '{{line_item.product_id}}',
                            item_name: HTML.decode('{{line_item.title | escape}}'),
                            price: parseInt('{{line_item.price}}') / 100,
                            quantity: parseInt('{{line_item.quantity}}'),
                            item_category: HTML.decode('{{line_item.sku | escape}}'),
                        },
                        // {% endfor %}
                    ].concat(cartItems_additional);
                    console.table(items);

                    // prevent re-sending begin checkout for the same cart items
                    let cartItems = JSON.stringify(items);
                    if (cartItems === localStorage['ga4.begin_checkout.items'])
                        throw new Error('the same begin_checkout already trigger once previously');

                    gtag2('event', 'begin_checkout', {
                        send_to: GA4_Ids,
                        currency: CURRENCY,
                        value: Math.round(
                            items.map(function (x) { return x.quantity * x.price; })
                                .reduce(function (cfx, x) { return cfx + x; }, 0.00)
                            * 100) / 100,
                        items: items
                    });

                    // to avoid duplicate begin checkout when refreshing page
                    localStorage['ga4.begin_checkout.items'] = cartItems;
                }
                document.addEventListener('click', function (e) {
                    const Elem = e.target.closest('[name=checkout] , .btn-checkout, .shopify-payment-button__button');
                    if (Elem === null) return;

                    handle_begin_checkout(cartItems_additional);
                });
                if (location.pathname.startsWith('/cart') === true) {
                    handle_begin_checkout();
                }

                // begin_checkout (product view - direct purchase 1 item)
                document.addEventListener('click', function (e) {
                    const Elem = e.target.closest('.shopify-payment-button__button');
                    if (Elem === null) return;

                    let item = {
                        item_id: '{{product.id}}',
                        item_name: HTML.decode('{{product.title | escape}}'),
                        price: parseInt('{{product.price}}') / 100,
                        quantity: document.querySelector('input[name=quantity]')?.value ?? 1,
                        item_category: HTML.decode('{{product.selected_or_first_available_variant.sku | escape}}'),
                    };
                    console.warn(item);

                    // prevent re-sending begin checkout for the same cart items
                    let cartItems = JSON.stringify([item]);
                    if (cartItems === localStorage['ga4.begin_checkout.items'])
                        throw new Error('the same begin_checkout already trigger once previously');

                    gtag2('event', 'begin_checkout', {
                        send_to: GA4_Ids,
                        currency: CURRENCY,
                        value: item.price,
                        items: [item]
                    });
                    // to avoid duplicate begin checkout when refreshing page
                    localStorage['ga4.begin_checkout.items'] = cartItems;
                });
            }, 0);

        };
        window.addEventListener('DOMContentLoaded', setup_init_code);
    })();
</script>






  <!-- hnk portfolio proof -->
  <link rel="prefetch" href="{{shop.url}}" as="document">

<!--   yahoo ads -->
  <script type="application/javascript">(function(w,d,t,r,u){w[u]=w[u]||[];w[u].push({'projectId':'10000','properties':{'pixelId':'10157456','userEmail': '<email_address>'}});var s=d.createElement(t);s.src=r;s.async=true;s.onload=s.onreadystatechange=function(){var y,rs=this.readyState,c=w[u];if(rs&&rs!="complete"&&rs!="loaded"){return}try{y=YAHOO.ywa.I13N.fireBeacon;w[u]=[];w[u].push=function(p){y([p])};y(c)}catch(e){}};var scr=d.getElementsByTagName(t)[0],par=scr.parentNode;par.insertBefore(s,scr)})(window,document,"script","https://s.yimg.com/wi/ytc.js","dotq");</script>
  
  <!--   bing ads -->
  <!--DOT -->
  
  <script type="application/javascript">(function(w,d,t,r,u){w[u]=w[u]||[];w[u].push({'projectId':'10000','properties':{'pixelId':'10186214'}});var s=d.createElement(t);s.src=r;s.async=true;s.onload=s.onreadystatechange=function(){var y,rs=this.readyState,c=w[u];if(rs&&rs!="complete"&&rs!="loaded"){return}try{y=YAHOO.ywa.I13N.fireBeacon;w[u]=[];w[u].push=function(p){y([p])};y(c)}catch(e){}};var scr=d.getElementsByTagName(t)[0],par=scr.parentNode;par.insertBefore(s,scr)})(window,document,"script","https://s.yimg.com/wi/ytc.js","dotq");</script>
  
  <script>(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"134598083"};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");</script>

  <meta name="DC.title" content="Revopoint 3D Technology Inc." />
  <meta name="geo.region" content="CN" />
  <meta name="geo.placename" content="Nanshan District" />
  <meta name="geo.position" content="22.536014;113.925622" />
  <meta name="ICBM" content="22.536014, 113.925622" />
  <meta name=robots content="noydir, noodp"/>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="canonical" href="{{ canonical_url }}">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.primary_accent_color }}">
  <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
  <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
  <link rel="preconnect" href="https://monorail-edge.shopifysvc.com">
  <link rel="dns-prefetch" href="https://cdn.shopify.com">
    <script type="module" src="{{ 'vendor.min.js' | asset_url }}"></script>
    <script type="module" src="{{ 'theme.js' | asset_url }}"></script>
    <script type="module" src="{{ 'sections.js' | asset_url }}"></script>

    {{ content_for_header }}

    {{- 'theme.css' | asset_url | stylesheet_tag: preload: true -}}
  {% include 'alireviews_core' %} 
 
	{{ shop.metafields.loox["global_html_head"] }}
    {% render 'judgeme_core' %}


{% render 'gsf-conversion-pixels' %}
{{ 'zify-products-slider.css' | asset_url | stylesheet_tag }}
<script type="text/javascript"> var zify_product_json = "{{ 'zify-products-slider.json' | asset_url }}";</script>
{{ 'zify_products_slider.js' | asset_url | script_tag }}
<script type="text/javascript">jQuery(document).ready(function(){Shopify.Products.recordRecentlyViewed( );});</script>
{% include 'add_header_assets' %}</head>

  <body class="{% if settings.show_page_transition %}page-transition{% endif %} {% if settings.zoom_image_on_hover %}zoom-image--enabled{% endif %}">
    {%- render 'shadow-dom-templates' -%}

    <a href="#main" class="skip-to-content sr-only">{{ 'general.accessibility.skip_to_content' | t }}</a>

    {%- if request.page_type != 'password' -%}
      {%- section 'announcement-bar' -%}
      {%- section 'header' -%}
      {%- section 'newsletter-popup' -%}

      {%- if settings.cart_type != 'page' and request.page_type != 'cart' -%}
        {%- section 'cart-drawer' -%}
      {%- endif -%}

      {%- if settings.cart_type == 'popover' -%}
        <cart-notification-drawer open-from="bottom" class="quick-buy-drawer drawer"></cart-notification-drawer>
      {%- endif -%}

      {%- if request.page_type != 'search' -%}
        {%- section 'search-drawer' -%}
      {%- endif -%}
    {%- endif -%}

    {%- if request.page_type == 'customers/account' or request.page_type == 'customers/order' or request.page_type == 'customers/addresses' -%}
      {%- section 'account-banner' -%}
    {%- endif -%}

    <main role="main" id="main" class="anchor">
      {{ content_for_layout }}

      {%- if request.page_type != 'password' -%}
        {%- section 'static-text-with-icons' -%}
      {%- endif -%}
    </main>

    {%- if request.page_type != 'password' -%}
      {%- section 'footer' -%}
    {%- endif -%}
  
	{{ shop.metafields.loox["global_html_body"] }}
  
{% include 'social-login' %}{{ '//cdn.shopify.com/s/files/1/0194/1736/6592/t/1/assets/booster-page-speed-optimizer.js?23' | script_tag }}
{% include 'add_footer_assets' %}</body>
</html>