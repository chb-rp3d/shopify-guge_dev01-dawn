{{ 'section-home-contact.css' | asset_url | stylesheet_tag }}

<style>
  .section-{{section.id}}{
      padding:{{section.settings.padding}};
  }

  @media screen and (max-width: 768px) {
      .section-{{section.id}}{
      padding:{{section.settings.md_padding}};
      background-color:#F0F1F2;
  }
  }
</style>
<div class="page-layout section-{{section.id}}">
  <div class="page-layout-content">
    <div class="section-home-contact-container">
      {% liquid
        assign items = section.blocks | where: 'type', 'items'
        assign icons = section.blocks | where: 'type', 'icons'
      %}
      {% for item in items %}
        <div class="section-home-contact-item">
          <h3 class="section-home-contact-h3">{{ item.settings.title }}</h3>
          <div class="section-home-contact-text">{{ item.settings.text }}</div>
          {% if forloop.index == 1 %}
            <div class="section-home-contact-form">
              {% form 'customer', id: 'home-customer-from' %}
                {% comment %} {% render 'subscribe-success', form: form, font_color: '#000' %} {% endcomment %}
                <input
                  type="hidden"
                  name="contact[tags]"
                  value="prospect,newsletter"
                >
                <input
                  type="hidden"
                  name="contact[context]"
                  value="footer"
                >
                <div class="home-customer">
                  <div class="home-customer-input-ward">
                    <input
                      class="home-customer-input"
                      type="email"
                      value="{% if customer %}{{ customer.email }}{% endif %}"
                      placeholder="メール"
                      name="contact[email]"
                      id="Email-{{ section.id }}"
                      autocorrect="off"
                      autocapitalize="off"
                    >
                    {% comment %} <div class="verify-field">Please fill in the field</div> {% endcomment %}
                  </div>

                  <button
                    id="home-customer-btn"
                    type="submit"
                    name="commit"
                  >
                    登録
                  </button>
                </div>
              {% endform %}
            </div>
          {% else %}
            <div class="section-home-contact-icons">
              {% for icon in icons %}
                <a class="section-home-contact-icon-item" href="{{ icon.settings.url }}">
                  {% render 'img-lazyload', image_url: icon.settings.icon %}
                </a>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% schema %}
{
  "name": "section-home-contact",
  "settings": [
    {
      "type": "text",
      "id": "padding",
      "label": "模块内边距",
      "default": "15px 20px 0"
    },
    {
      "type": "text",
      "id": "md_padding",
      "label": "移动端模块内边距",
      "default": "40px 20px 0"
    }
  ],
  "blocks": [
    {
      "name": "items",
      "type": "items",
      "settings": [
        {
          "type": "richtext",
          "id": "title",
          "label": "标题"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "文本内容"
        }
      ]
    },
    {
      "name": "icons",
      "type": "icons",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "图标"
        },
        {
          "type": "url",
          "id": "url",
          "label": "跳转链接"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "section-home-contact"
    }
  ]
}
{% endschema %}
