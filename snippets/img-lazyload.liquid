{% if image_url %}
  {% capture class %}
    lazyload {{ class_name }}
  {% endcapture %}

  {%- liquid
    assign height = 'auto'
    if image_height != blank
      assign height = image_height
    endif
    assign width = image_url.width
    if image_width != blank
      assign width = image_width
    endif
    assign alt = image_url.alt
    if image_alt != blank
      assign alt = image_alt
    endif
  -%}
  <img
    src="{{image_url | image_url: width: width }}"
    alt="{{alt}}"
    height="{{height}}"
    style="{{style}}"
    width="{{ width }}"
    loading="lazy"
    class="{{class}}"
  >
  <noscript>
    <img
      width="auto"
      height="auto"
      loading="lazy"
      class="lazyloaded"
      src="{{ image_url | img_url: '100x' }}"
      alt="{{ image_url.alt }}"
    >
  </noscript>
{% endif %}
